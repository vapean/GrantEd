<div class="row my-4">
  <div class="col-12 mx-auto">

    <div class="row">
      <div class="col-4 mx-auto">
        <div class="image mx-auto ">
          <img src="https://sunlimetech.com/portfolio/boot4menu/assets/imgs/team/img_01.png" alt="card image">
        </div>
      </div>
    </div>



    <div class="row">

      <div class="w-100 px-4">

        <form novalidate [formGroup]="formUpdate" (ngSubmit)="manejarUpdate()" *ngIf="formUpdate">
          <div class="col-3">

          </div>
          <div class="col 9">

          </div>

          <div class="row mb-3 mt-5">
            <div class="col-md-12 col-lg-6 pr-5">
              <div class="form-label-group">
                <label>¿Cómo te llamas?*</label>
                <!-- <mat-form-field>
                    <input matInput placeholder="Enter your password" [type]="hide ? 'password' : 'text'">
                    <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                  </mat-form-field> -->
                <input class="form-control" name="name" id="name" type="text" placeholder="Introduce tu nombre"
                  autofocus formControlName='name' [value]="usuario.name">

                <p *ngIf="formUpdate.controls['name'].errors?.required && formUpdate.controls['name'].dirty">
                  Necesitamos un nombre para poder recordarte
                </p>

                <p *ngIf="formUpdate.controls['name'].errors?.maxlength && formUpdate.controls['name'].dirty">
                  El campo nombre tiene un tamaño maximo de
                  {{formUpdate.controls['nombre'].errors.maxlength.requiredLength}}
                  caracteres y has escrito {{formUpdate.controls['nombre'].errors.maxlength.actualLength}}
                  caracteres
                </p>
              </div>
            </div>
            <div class="col-md-12 col-lg-6 pl-5">
              <div class="form-label-group">
                <label for="inputSurname">¿Cuál es tu apellido?*</label>
                <input class="form-control" name="surname" id="surname" placeholder="Introduce tu apellido" type="text"
                  formControlName='surname'>

                <p *ngIf="formUpdate.controls['surname'].errors?.required && formUpdate.controls['surname'].dirty">
                  Necesitamos un apellido para poder recordarte
                </p>

                <p *ngIf="formUpdate.controls['surname'].errors?.maxlength && formUpdate.controls['surname'].dirty">
                  El campo apellido tiene un tamaño maximo de
                  {{formUpdate.controls['surname'].errors.maxlength.requiredLength}}
                  caracteres y has escrito {{formUpdate.controls['surname'].errors.maxlength.actualLength}}
                  caracteres
                </p>
              </div>
            </div>
          </div>


          <div class="row mb-3">
            <div class="col-md-12 col-lg-6 pr-5">
              <div class="form-label-group">
                <label for="inputUsername">¿Con que nombre quieres que te llamemos?*</label>
                <input class="form-control" name="username" id="username" placeholder="Introduce tu nombre de usuario"
                  type="text" formControlName='username'>

                <p *ngIf="formUpdate.controls['username'].errors?.required && formUpdate.controls['username'].dirty">
                  Necesitamos que nos digas con que nombre referirnos a ti
                </p>

                <p *ngIf="formUpdate.controls['username'].errors?.maxlength && formUpdate.controls['username'].dirty">
                  EL campo usuario tiene un tamaño maximo de
                  {{formUpdate.controls['username'].errors.maxlength.requiredLength}}
                  caracteres y has escrito {{formUpdate.controls['username'].errors.maxlength.actualLength}}
                  caracteres
                </p>
              </div>

            </div>
            <div class="col-md-12 col-lg-6 pl-5">
              <div class="form-label-group">
                <label for="inputEmail">¿En que email podemos contactarte?* </label>
                <input type="email" class="form-control" id="mail" name="mail" placeholder="¡Prometemos no enviar
                span!" formControlName='mail'>
                <p *ngIf="formUpdate.controls['mail'].errors?.required && formUpdate.controls['mail'].dirty">
                  Necesitamos un email en el que poder enviarte las mejores novedades </p>
                <p *ngIf="formUpdate.controls['mail'].errors?.pattern && formUpdate.controls['mail'].dirty">
                  El campo email debe tener el formato correcto
                </p>
              </div>
            </div>
          </div>



          <!-- <div class="row mb-3">
            <div class="col-md-12 col-lg-6 pr-5">
              <div class="form-label-group">
                <label>¡Protégete con una buena contraseña!*</label>
                <input type="password" class="form-control" name="password" id="password"
                  placeholder="Introduce tu contraseña" formControlName='password'>
                <p *ngIf="formUpdate.controls['password'].errors?.pattern && formUpdate.controls['password'].dirty">
                  Para mayor seguridad la contraseña tiene que tenes al menos 6 caracteres y contener al menos un
                  numero y una letra
                </p>
              </div>
            </div>
            <div class="col-md-12 col-lg-6 pl-5">
              <div class="form-label-group">

                <label>Repite la contraseña para doble seguridad*</label>

                <input type="password" class="form-control" name="r-password" id="r-password"
                  placeholder="Repite tu contraseña" formControlName='password_repeat'>
                <p *ngIf="formUpdate.errors?.repeatpassword ">
                  {{formUpdate.errors.repeatpassword}}
                </p>
              </div>

               <div class="custom-control custom-checkbox mb-3">
                <input type="checkbox" class="custom-control-input" id="remember_pasword">
                <label class="custom-control-label" for="customCheck1" formControlName='remember'>Recordar Contraseña</label>
              </div>
            </div>
          </div>  -->

          <div class="row mb-3">
            <div class="col-md-12 col-lg-6 pr-5">
              <div class="form-label-group">
                <label>¿Qué edad tienes?</label>
                <input type="text" name="age" id="age" class="form-control" formControlName='age'>
                <p *ngIf="formUpdate.controls['age'].errors?.age && formUpdate.controls['age'].dirty">
                  {{formUpdate.controls['age'].errors?.age}}
                </p>
              </div>
            </div>
            <div class="col-md-12 col-lg-6 pl-5 ">
              <mat-form-field>
                <mat-select placeholder="Genero" formControlName="gender" [(ngModel)]="usuario.gender" multiple>
                  <mat-option *ngFor="let gender of arrGenders" [value]="gender">{{gender}}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <!-- <label>¿Cual es tu género?</label>
              <select class="selectpicker" name="gender" formControlName="gender" id="gender"
                title="Selecciona tu sexo">
                <option value="male">Hombre</option>
                <option value="female">Mujer</option>
                <option value="other">Otro</option>
              </select> -->

            </div>
          </div>



          <h3 class="login-heading mb-3 font-weight-bold text-center">Solo unos datos mas para ¡poder ofrecerte la
            mejor selección</h3>

          <hr>



          <div class="row mb-3 mt-5">
            <div class="col-md-12 col-lg-6 pr-5">
              <mat-form-field>
                <mat-select placeholder="Area de estudios" formControlName="study_field"
                  [(ngModel)]="usuario.study_field" multiple>
                  <mat-option *ngFor="let field of arrFields" [value]="field.toLowerCase()">{{field}}
                  </mat-option>
                </mat-select>
              </mat-form-field>


              <!-- <div class="form-label-group">
                <label>¿ Que área de estudio te interesa?</label>
                <select class="selectpicker" name="study_field" formControlName='study_field' id="study_field"
                  data-live-search="true" title="Elige todas los que te quieras" data-size="5" data-actions-box="true"
                  multiple>
                  <option [value]="field.toLowerCase()" *ngFor="let field of arrFields">{{field}}</option>
                </select>
              </div> -->
            </div>

            <div class="col-md-12 col-lg-6 pl-5 ">

              <mat-form-field>
                <mat-select placeholder="Tipo de estudios" formControlName="study_level"
                  [(ngModel)]="usuario.study_level" multiple>
                  <mat-option *ngFor="let level of arrLevels" [value]="level">{{level}}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <!-- <div class="form-label-group">
                <label> ¿Que tipo de curso quieres estudiar?</label>
                <select class="selectpicker" name="study_level" formControlName='study_level' id="study_level"
                  data-live-search="true" title="Elige tantos como te interesen" data-size="5" data-actions-box="true"
                  multiple>
                  <option [value]="level" *ngFor="let level of arrLevels">{{level}}</option>
                </select>
              </div> -->
            </div>
          </div>



          <div class="row mb-3">
            <div class="col-md-12 col-lg-6 pr-5">

              <mat-form-field>
                <mat-select placeholder="Pais de origen" formControlName="country_origin"
                  [(ngModel)]="usuario.country_origin" multiple>
                  <mat-option *ngFor="let country of arrCountries" [value]="country.iso2">{{country.nombre}}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <!-- <div class="form-label-group">
                <label> ¿De que país eres?*</label>
                <select class="selectpicker" name="country_origin" formControlName='country_origin' id="country_origin"
                  data-live-search="true" title="Selecciona tu nacionalidad" data-size="5"
                  (change)="comprobarEspana($event)">
                  <option [value]="country.iso2" *ngFor="let country of arrCountries">{{country.nombre}}</option>
                </select>
              </div> -->
            </div>

            <div class="col-md-12 col-lg-6 pl-5">
              <mat-form-field>
                <mat-select placeholder="Pais de destino" formControlName="country_destination"
                  [(ngModel)]="usuario.country_destination" multiple>
                  <mat-option *ngFor="let country of arrCountries" [value]="country.iso2">{{country.nombre}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>



          <div class="row mb-3">


            <div class="col-md-12 col-lg-6 pr-5 hide" [ngClass]="{'mostrar': comprobacionPais}">

              <mat-form-field>
                <mat-select placeholder="Provincia de origen" formControlName="province_origin"
                  [(ngModel)]="usuario.province_origin" multiple>
                  <mat-option *ngFor="let province of arrProvinces" [value]="province">{{province}}
                  </mat-option>
                </mat-select>
              </mat-form-field>



              <!-- <div class="form-label-group">
                <label> ¿De provincia eres? * (Sólo España)</label>
                <select class="selectpicker" name="province_origin" formControlName='province_origin'
                  id="province_origin_" data-live-search="true" title="Selecciona todas las que te interesen"
                  data-size="5">
                  <option [value]="province" *ngFor="let province of arrProvinces">{{province}}</option>
                </select>
              </div> -->
            </div>

            <div class="col-md-12 col-lg-6 pl-5 hide" [ngClass]="{'mostrar': comprobacionPais}">


              <mat-select placeholder="Provincia de destino" formControlName="province_destination"
                [(ngModel)]="usuario.province_destination" multiple>
                <mat-option *ngFor="let province of arrProvinces" [value]="province">{{province}}
                </mat-option>
              </mat-select>

              <!-- <div class="form-label-group">
                <label> ¿Para que provincia quieres la beca? (Sólo España)</label>
                <select class="selectpicker" name="province_destination" formControlName='province_destination'
                  id="province_destination_" data-live-search="true" title="Selecciona tu provincia" data-size="5"
                  data-actions-box="true" multiple>
                  <option [value]="province" *ngFor="let province of arrProvinces">{{province}}</option>
                </select> 
              </div>-->
            </div>



          </div>
          <!-- 
          <div class="row mb-3">
            <div class="col-md-12 col-lg-6 pr-5 ">
              <div class="form-label-group">
                <label>¿Cuando quieres empezar?</label>
                <select class="selectpicker" name="date" formControlName='date' id="date" title="Selecciona el semestre"
                  multiple>
                  <option id="date_primer" value="primer">Primer semestre</option>
                  <option id="date_segundo" value="segundo">Segundo semestre</option>
                </select>
              </div>
            </div>
          </div> -->

          <div class="row mb-3">
            <div class="col-4 mx-auto">
              <button class=" botonReactivo btn btn-lg btn-primary btn-block text-uppercase"
                [ngClass]="{'button-disabled': formUpdate.invalid}" [disabled]="formUpdate.invalid" type="submit"
                data-toggle="modal" data-target="#exampleModalCenter">
                Modificar </button>
            </div>
          </div>

        </form>

      </div>


    </div>

    <usuario-becas></usuario-becas>



    <div class="row mt-5">
      <div class="col-4 mx-auto">
        <button class="btn btn-lg btn-danger btn-block text-uppercase " type="submit" (click)='userExit()'> Salir
        </button>
      </div>
    </div>

  </div>
</div>


<!-- ----------modal------------- -->


<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <!-- <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div> -->
      <div class="modal-body">
        {{result}}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
        <button type="button" class="btn btn-success hide" (click)="continuarUsuario()" data-dismiss="modal"
          [ngClass]="{'mostrar': comprobacionResultado}">Continuar al Usuario</button>
      </div>
    </div>
  </div>
</div>